(this["webpackJsonpexcalidraw-tutorial"]=this["webpackJsonpexcalidraw-tutorial"]||[]).push([[0],{17:function(e,t,n){e.exports=n(24)},22:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(11),c=n.n(i),o=(n(22),n(16)),l=n(0),s=n(2),u=n(4),f=n(7),d=n.n(f),y=n(12),p=n(3),h=n(8),m=n(13),v=n(14),g=n(15),b=0,x=0,w=document.getElementsByClassName("input_video")[0],O=document.getElementsByClassName("output_canvas")[0],j=O.getContext("2d");var E=new v.Hands({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/hands/".concat(e)}});E.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),E.onResults((function(e){if(j.save(),j.clearRect(0,0,O.width,O.height),j.drawImage(e.image,0,0,O.width,O.height),e.multiHandLandmarks){var t,n=Object(p.a)(e.multiHandLandmarks);try{for(n.s();!(t=n.n()).done;){var a=t.value;b=a[8].x,x=a[8].y}}catch(r){n.e(r)}finally{n.f()}}j.restore()})),new g(w,{onFrame:function(){var e=Object(y.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.send({image:w});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),width:1280,height:720}).start();var k=h.a.generator(),C=function(e,t,n,a,r,i){switch(i){case"line":case"rectangle":return{id:e,x1:t,y1:n,x2:a,y2:r,type:i,roughElement:"line"===i?k.line(t,n,a,r):k.rectangle(t,n,a-t,r-n)};case"pencil":return{id:e,type:i,points:[{x:t,y:n}]};default:throw new Error("Type not recognised: ".concat(i))}},M=function(e,t,n,a,r){return Math.abs(e-n)<5&&Math.abs(t-a)<5?r:null},S=function(e,t,n,a,r,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o={x:e,y:t},l={x:n,y:a},s={x:r,y:i},u=F(o,l)-(F(o,s)+F(l,s));return Math.abs(u)<c?"inside":null},z=function(e,t,n){var a=n.type,r=n.x1,i=n.x2,c=n.y1,o=n.y2;switch(a){case"line":var l=S(r,c,i,o,e,t),s=M(e,t,r,c,"start"),u=M(e,t,i,o,"end");return s||u||l;case"rectangle":var f=M(e,t,r,c,"tl"),d=M(e,t,i,c,"tr"),y=M(e,t,r,o,"bl"),p=M(e,t,i,o,"br");return f||d||y||p||(e>=r&&e<=i&&t>=c&&t<=o?"inside":null);case"pencil":return n.points.some((function(a,r){var i=n.points[r+1];return!!i&&null!=S(a.x,a.y,i.x,i.y,e,t,5)}))?"inside":null;default:throw new Error("Type not recognised: ".concat(a))}},F=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},L=function(e,t,n){return n.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{position:z(e,t,n)})})).find((function(e){return null!==e.position}))},B=function(e,t,n){switch(n.type){case"line":case"rectangle":e.draw(n.roughElement);break;case"pencil":var a=function(e){if(!e.length)return"";var t=e.reduce((function(e,t,n,a){var r=Object(s.a)(t,2),i=r[0],c=r[1],o=Object(s.a)(a[(n+1)%a.length],2),l=o[0],u=o[1];return e.push(i,c,(i+l)/2,(c+u)/2),e}),["M"].concat(Object(l.a)(e[0]),["Q"]));return t.push("Z"),t.join(" ")}(Object(m.a)(n.points));t.fill(new Path2D(a));break;default:throw new Error("Type not recognised: ".concat(n.type))}},H=function(){var e=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),o=Object(s.a)(c,2),u=o[0],f=o[1];return[u[r],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="function"===typeof e?e(u[r]):e;if(t){var a=Object(l.a)(u);a[r]=n,f(a)}else{var c=Object(l.a)(u).slice(0,r+1);f([].concat(Object(l.a)(c),[n])),i((function(e){return e+1}))}},function(){return r>0&&i((function(e){return e-1}))},function(){return r<u.length-1&&i((function(e){return e+1}))}]}([]),t=Object(s.a)(e,4),n=t[0],i=t[1],c=t[2],f=t[3],d=Object(a.useState)("none"),y=Object(s.a)(d,2),p=y[0],m=y[1],v=Object(a.useState)("pencil"),g=Object(s.a)(v,2),w=g[0],O=g[1],j=Object(a.useState)(null),E=Object(s.a)(j,2),k=E[0],M=E[1];Object(a.useLayoutEffect)((function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=h.a.canvas(e);n.forEach((function(e){return B(a,t,e)}))}),[n]),Object(a.useEffect)((function(){var e=function(e){(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.shiftKey?f():c())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[c,f]);var S=function(e,t,a,r,c,o){var s=Object(l.a)(n);switch(o){case"line":case"rectangle":s[e]=C(e,t,a,r,c,o);break;case"pencil":s[e].points=[].concat(Object(l.a)(s[e].points),[{x:r,y:c}]);break;default:throw new Error("Type not recognised: ".concat(o))}i(s,!0)};return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed"}},r.a.createElement("input",{type:"radio",id:"selection",checked:"selection"===w,onChange:function(){return O("selection")}}),r.a.createElement("label",{htmlFor:"selection"},"Selection"),r.a.createElement("input",{type:"radio",id:"line",checked:"line"===w,onChange:function(){return O("line")}}),r.a.createElement("label",{htmlFor:"line"},"Line"),r.a.createElement("input",{type:"radio",id:"rectangle",checked:"rectangle"===w,onChange:function(){return O("rectangle")}}),r.a.createElement("label",{htmlFor:"rectangle"},"Rectangle"),r.a.createElement("input",{type:"radio",id:"pencil",checked:"pencil"===w,onChange:function(){return O("pencil")}}),r.a.createElement("label",{htmlFor:"pencil"},"Pencil")),r.a.createElement("div",{style:{position:"fixed",bottom:0,padding:10}},r.a.createElement("button",{onClick:c},"Undo"),r.a.createElement("button",{onClick:f},"Redo"),r.a.createElement("button",{onClick:function(){window.location.reload(!1)}},"Clear")),r.a.createElement("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){var t=e.clientX,a=e.clientY;if("selection"===w){var r=L(t,a,n);if(r){if("pencil"===r.type){var c=r.points.map((function(e){return t-e.x})),o=r.points.map((function(e){return a-e.y}));M(Object(u.a)(Object(u.a)({},r),{},{xOffsets:c,yOffsets:o}))}else{var s=t-r.x1,f=a-r.y1;M(Object(u.a)(Object(u.a)({},r),{},{offsetX:s,offsetY:f}))}i((function(e){return e})),"inside"===r.position?m("moving"):m("resizing")}}else{var d=n.length,y=C(d,t,a,t,a,w);i((function(e){return[].concat(Object(l.a)(e),[y])})),M(y),m("drawing")}},onMouseMove:function(e){var t={x:b,y:x},a=t.clientX,r=t.clientY;if("selection"===w){var c=L(a,r,n);e.target.style.cursor=c?function(e){switch(e){case"tl":case"br":case"start":case"end":return"nwse-resize";case"tr":case"bl":return"nesw-resize";default:return"move"}}(c.position):"default"}if("drawing"===p){var s=n.length-1,f=n[s],d=f.x1,y=f.y1;S(s,d,y,a,r,w)}else if("moving"===p)if("pencil"===k.type){var h=k.points.map((function(e,t){return{x:a-k.xOffsets[t],y:r-k.yOffsets[t]}})),m=Object(l.a)(n);m[k.id]=Object(u.a)(Object(u.a)({},m[k.id]),{},{points:h}),i(m,!0)}else{var v=k.id,g=k.x1,O=k.x2,j=k.y1,E=k.y2,C=k.type,M=k.offsetX,z=k.offsetY,F=a-M,B=r-z;S(v,F,B,F+(O-g),B+(E-j),C)}else if("resizing"===p){var H=k.id,R=k.type,T=k.position,X=Object(o.a)(k,["id","type","position"]),Y=function(e,t,n,a){var r=a.x1,i=a.y1,c=a.x2,o=a.y2;switch(n){case"tl":case"start":return{x1:e,y1:t,x2:c,y2:o};case"tr":return{x1:r,y1:t,x2:e,y2:o};case"bl":return{x1:e,y1:i,x2:c,y2:t};case"br":case"end":return{x1:r,y1:i,x2:e,y2:t};default:return null}}(a,r,T,X),D=Y.x1,I=Y.y1,K=Y.x2,N=Y.y2;S(H,D,I,K,N,R)}},onMouseUp:function(){if(k){var e=k.id,t=n[e],a=t.id,r=t.type;if(("drawing"===p||"resizing"===p)&&function(e){return["line","rectangle"].includes(e)}(r)){var i=function(e){var t=e.type,n=e.x1,a=e.y1,r=e.x2,i=e.y2;if("rectangle"===t){var c=Math.min(n,r),o=Math.max(n,r);return{x1:c,y1:Math.min(a,i),x2:o,y2:Math.max(a,i)}}return n<r||n===r&&a<i?{x1:n,y1:a,x2:r,y2:i}:{x1:r,y1:i,x2:n,y2:a}}(n[e]),c=i.x1,o=i.y1,l=i.x2,s=i.y2;S(a,c,o,l,s,r)}}m("none"),M(null)}},"Canvas"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.f7a38d15.chunk.js.map